# 04_Garbage Collection(ê°€ë¹„ì§€ ì»¬ë ‰ì…˜)
# ê°€ë¹„ì§€ ì»¬ë ‰ì…˜(Garbage Collection)

## - ìžë°”  ë§ê³  ë‹¤ë¥¸ ì–¸ì–´ì˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ëŠ”â“

- **Cì–¸ì–´ë‚˜ C++**ê°™ì€ ì–¸ì–´ì—ì„œ ***ë©”ëª¨ë¦¬ ê´€ë¦¬ëŠ” í”„ë¡œê·¸ëž˜ë¨¸ì˜ ì±…ìž„*** ì´ë‹¤.
- í•„ìš”í•œ **ë©”ëª¨ë¦¬ ê³µê°„ì„** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ **ìš´ì˜ì²´ì œë¡œë¶€í„° í• ë‹¹ ë°›ì•„ ì‚¬ìš©** í•˜ë‹¤ê°€ ë‹¤ ì“°ë©´ ë‹¤ì‹œ í•´ì œí•´ì„œ ìš´ì˜ì²´ì œë¡œ **ë°˜í™˜** í•´ì•¼í•œë‹¤.
- ê°œë°œìžê°€ ê¼¼ê¼¼ížˆ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë©”ëª¨ë¦¬ ê³µê°„ì„ í• ë‹¹ ë°›ê¸°ë§Œ í•˜ê³  ë°˜í™˜í•˜ì§€ ì•Šì•„ í”„ë¡œì„¸ìŠ¤ê°€ ì ì  ì»¤ì§€ë‹¤ê°€ ì£½ê²Œëœë‹¤.
- ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ì§€ ì•Šì•„ì„œ ìƒê¸°ëŠ” ì´ëŸ° ë²„ê·¸ë¥¼ **`â€œë©”ëª¨ë¦¬ ë¦­(Memory Leak)â€`** ì´ë¼ê³  í•œë‹¤.

## - ìžë°”ëŠ”â“

- ìžë°”ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ë¼ëŠ” ë§‰ì¤‘í•œ ì±…ìž„ì—ì„œ í”„ë¡œê·¸ëž˜ë¨¸ë¥¼ ìžìœ ë¡­ê²Œ í•´ì¤¬ë‹¤.
- ìžë°”ë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œê·¸ëž˜ë¨¸ëŠ” ì§ì ‘ ë©”ëª¨ë¦¬ ê³µê°„ì˜ í• ë‹¹ê³¼ ë°˜í™˜ì„ ìˆ˜í–‰í•˜ëŠ” ëŒ€ì‹  **JVMì„ í†µí•´ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹** ë°›ëŠ”ë‹¤.
- ***ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì€ JVMì´ ì•Œì•„ì„œ íšŒìˆ˜í•œ ë‹¤ìŒ í•´ì œ*** í•´ì¤€ë‹¤.
- JVMì˜ ì´ëŸ° ë©”ëª¨ë¦¬ í•´ì œ ë™ìž‘ì„ **`â€œê°€ë¹„ì§€ ì»¬ë ‰ì…˜(Garbage Collection)â€`**  ì´ë¼ê³  í•œë‹¤.

## ê°€ë¹„ì§€(Garbage)ëŠ” ë­ì§€?

> ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì€ ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì„ JVMì•Œì•„ì„œ íšŒìˆ˜í•´ì£¼ëŠ” ë™ìž‘ì„ ì˜ë¯¸í•œë‹¤.
ì´ ë•Œ **ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ ê³µê°„**ì´ ë°”ë¡œ **`â€œê°€ë¹„ì§€(Garbage)â€`** ë¼ê³  í•  ìˆ˜ ìžˆë‹¤.
> 

### ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ ê³µê°„â“ðŸ§

```java
Person person = new Person("Dave");
person.sayHello();

person = new Person("Eric");
person.sayHello();
```

- ìœ„ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ë©´ì„œ ë‘ ê°œì˜ ê°ì²´ê°€ ìƒì„±ëœë‹¤.
- â€œDaveâ€ë¼ëŠ” ì´ë¦„ì˜ Person ê°ì²´ì™€ â€œEricâ€ì´ë¼ëŠ” ì´ë¦„ì˜ Person ê°ì²´ê°€ ì‹¤í–‰ë˜ëŠ” ë„ì¤‘ì— ìƒì„±ëœë‹¤.
- ***ìƒì„±ëœ ê°ì²´*** ëŠ” ***person ë³€ìˆ˜ì˜ ì˜í•´ ì°¸ì¡°*** ëœë‹¤.
![image](https://user-images.githubusercontent.com/106788504/198931582-1aea422e-cc81-4fa4-ae18-41abf4a4e811.png)

- ê·¸ë¦¼ì„ ê·¸ë ¤ë³´ë©´,
    1. â€œDaveâ€ ê°ì²´ê°€ ìƒì„±ëœ ì´í›„ person ë³€ìˆ˜ì— ì˜í•´ ì°¸ì¡° ëœë‹¤. ì´ ë•ŒëŠ” ê°€ë¹„ì§€ê°€ ì—†ë‹¤.
    2. ì´ í›„ â€œEricâ€ ê°ì²´ê°€ ìƒì„±ë˜ê³  person ë³€ìˆ˜ê°€ ìƒˆë¡œ ìƒì„±ëœ â€œEricâ€ ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.
    3. â€œDaveâ€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë˜ person ë³€ìˆ˜ê°€ â€œEricâ€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë©´ì„œ â€œDaveâ€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ê°€ ì‚´ë¼ì¡Œë‹¤.
    4. â€œDaveâ€ ê°ì²´ëŠ” ì–´ë– í•œ ê²½ë¡œë¡œë„ ì°¸ì¡°ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— **â€œUnreachableâ€ ìƒíƒœ**ë¼ê³  í•˜ë©°,
    **ì´ ê°ì²´ëŠ” ê°€ë¹„ì§€ë¡œ íŒë‹¨ë˜ì–´ íšŒìˆ˜** ë‹¹í•œë‹¤.

â­ï¸ âž¡ï¸Â ***ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì„ ìˆ˜í–‰í•˜ëŠ” â€œê°€ë¹„ì§€ ì»¬ë ‰í„°(Garbage Collector)â€ëŠ” ìŠ¤íƒ ë³€ìˆ˜ë¡œë¶€í„° ì°¸ì¡° ì²´ì¸ì„ ë„ë‹¬í•  ìˆ˜ ì—†ëŠ”(Unreachable) ê°ì²´ë“¤ì„ ê°€ë¹„ì§€ë¡œ íŒë‹¨í•˜ê³ , ì´ ê°ì²´ë“¤ì˜ ë©”ëª¨ë¦¬ ê³µê°„ì„ íšŒìˆ˜í•œë‹¤.***

# Garbage Collection Process

### Step 1 : Marking ë§ˆí‚¹

- ì´ ë‹¨ê³„ì—ì„œëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ì‚¬ìš©ì¤‘ì¸ ë©”ëª¨ë¦¬ì™€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ ì¡°ê°ì„ ì‹ë³„í•œë‹¤.

![image](https://user-images.githubusercontent.com/106788504/198931623-532bc665-7bfe-4563-b835-7209503a8703.png)


- ì°¸ì¡°ëœ ê°ì²´ëŠ” íŒŒëž€ìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ê³ , ì°¸ì¡°ë˜ì§€ ì•Šì€ ê°ì²´ëŠ” ê¸ˆìƒ‰ìœ¼ë¡œ í‘œì‹œëœë‹¤.
- ì°¸ì¡° ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•´ì„œëŠ” ë§ˆí‚¹ ë‹¨ê³„ì—ì„œ ëª¨ë“  ê°ì²´ë¥¼ ìŠ¤ìº”í•´ì•¼ í•˜ëŠ”ë°,
- ì´ê²½ìš° í”„ë¡œì„¸ìŠ¤ ì‹œê°„ì´ ë§Žì´ ì†Œìš”ë  ìˆ˜ ìžˆë‹¤.

### Step 2 : Normal Deletion ì¼ë°˜ ì‚­ì œ

- ì¼ë°˜ ì‚­ì œëŠ” ì°¸ì¡°ë˜ì§€ ì•Šì€ ê°ì²´ë¥¼ ì œê±°í•˜ì—¬ ì°¸ì¡°ëœ ê°ì²´ì™€ í¬ì¸í„°ë¥¼ ì—¬ìœ  ê³µê°„ìœ¼ë¡œ ë‚¨ê¸´ë‹¤.
![image](https://user-images.githubusercontent.com/106788504/198931647-b4933fbe-b64f-445b-ac02-880e3f073ee8.png)


- ë©”ëª¨ë¦¬ í• ë‹¹ìžëŠ” ìƒˆ ê°ì²´ë¥¼ í• ë‹¹í•  ìˆ˜ ìžˆë„ë¡ ì°¸ì¡° ì—¬ìœ  ê³µê°„ì„ ìž¡ëŠ”ë‹¤.
- ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ ì°¸ì¡°ë˜ì§€ ì•Šì€ ê°ì²´ë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒ ì™¸ì—ë„ ì°¸ì¡°ëœ ë‚˜ë¨¸ì§€ ê°ì²´ë¥¼ ì••ì¶•í•  ìˆ˜ë„ ìžˆë‹¤.
- ì°¸ì¡°ëœ ê°ì²´ë¥¼ í•¨ê»˜ ì´ë™í•˜ë©´ ìƒˆ ë©”ëª¨ë¦¬ í• ë‹¹ì´ í›¨ì”¬ ì‰½ê³  ë¹¨ë¼ì§„ë‹¤.

![image](https://user-images.githubusercontent.com/106788504/198931688-9613e970-54fa-4328-8f63-bdb87d9da48e.png)



**ì°¸ê³  ìžë£Œ**

> [https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html](https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html)
> 
> 
> [https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html](https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html)
>
