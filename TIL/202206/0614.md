# 22/06/14

<aside>
ğŸ’¡ Shoot for the  moon and if you miss, You will still be among the stars!

</aside>

# To_do_listâœ”ï¸


- [x]  ì¸í”„ëŸ° ORMí‘œì¤€_section.04~05 ë“£ê¸°
- [x]  í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ìë°” ìë£Œêµ¬ì¡°_part.05_ìŠ¤íƒ,í ë‹¤ ë“£ê¸°
- [x]  TIL


# íšŒê³ ğŸ¤”

JPAì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë‘ê°€ì§€ëŠ” 

ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë§¤í•‘ê³¼, ì‹¤ì œ JPAì˜ ë‚´ë¶€êµ¬ì¡°ì™€ ë™ì‘ë°©ì‹ì´ë‹¤.

ê°œë°œì˜ ê¸°ë³¸ì€ ì„¤ê³„!

# [í•™ìŠµë‚´ìš©]



# JPA ì˜ì†ì„± ê´€ë¦¬ - ë‚´ë¶€ ë™ì‘ ë°©ì‹

## JPAì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ 2ê°€ì§€

- ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ë§¤í•‘í•˜ê¸° (ì„¤ê³„ ê´€ë ¨)
- ì‹¤ì œ JPAê°€ ë„ëŒ€ì²´ ë‚´ë¶€ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í•´? **(ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸)**

## EntityManagerFactory / EntityManager

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 9.31.11.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/62a7ba3e-6416-4f9b-891b-6c4182387b5c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_9.31.11.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021307Z&X-Amz-Expires=86400&X-Amz-Signature=95f63355793473ba980dfe730f8a92593a0f635c47f163c9cd33d8cdacc94a58&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%25209.31.11.png%22&x-id=GetObject)

## ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸

- ì—”í‹°í‹°ë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½ ì´ë¼ëŠ” ëœ»!
- EntityManager.persist(entity);    â†’   ì—¬ê¸°ì„œ persistë¼ëŠ” í•¨ìˆ˜ëŠ” ë°ì´í„°ë¥¼ dbì— ì €ì¥í•´ì£¼ëŠ” ë©”ì„œë“œê°€ ì•„ë‹ˆê³  ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•´ì£¼ëŠ” ë©”ì„œë“œ!

## ì—”í‹°í‹° ë§¤ë‹ˆì €? ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸??

- ì—”í‹°í‹°ë§¤ë‹ˆì €ë¥¼ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì ‘ê·¼.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 9.37.39.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/a33f6b40-109f-4fca-94dc-de7a3bc357a8/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_9.37.39.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021318Z&X-Amz-Expires=86400&X-Amz-Signature=78dafb7ebaf488ed72d5ab12a7d37a2f763ecbc038f1823efb559cf0a56fc3ab&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%25209.37.39.png%22&x-id=GetObject)

## ì—”í‹°í‹°ì˜ ìƒëª…ì£¼ê¸°

- **ë¹„ì˜ì† (new/transient)** : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ ì—†ëŠ” ìƒˆë¡œìš´ ìƒíƒœ
    - ì˜ˆë¥¼ ë“¤ì–´ Memberë¼ëŠ” ê°ì²´ë¥¼ new í•œ ìƒíƒœ
- **ì˜ì† (managed)** : persist.(entity) í•˜ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ê´€ë¦¬ë˜ëŠ” ìƒíƒœ
- **ì¤€ì˜ì†(detached)** : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ì—ˆë‹¤ê°€ ë¶„ë¦¬ëœ ìƒíƒœ â†’ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ê¸°ëŠ¥ì„ ì‚¬ìš© ëª»í•¨.
- **ì‚­ì œ(removed)** :  ì‚­ì œëœ ìƒíƒœ

### ë¹„ì˜ì†

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 9.43.08.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/a0f7f785-1efa-431c-b740-aa1975485ba7/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_9.43.08.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021331Z&X-Amz-Expires=86400&X-Amz-Signature=f323bf6a89c78f80ba39719f2746fa2a441b6117fb7173a8ad703465a7104e07&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%25209.43.08.png%22&x-id=GetObject)

```java
//ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†)
Member member = new Member();
member.setId("member1");
member.setUsername("íšŒì›1");
```

- JPA ìƒê´€ì—†ì´ Memberê°ì²´ë¥¼ ìƒì„±ë§Œ í•œ ìƒíƒœ.
- ì˜ì† ì»¨í…ìŠ¤íŠ¸ì— ì•„ë¬´ê²ƒë„ ì•ˆë„£ì—ˆìŒ.

### ì˜ì†

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 9.45.04.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/7d8b5899-0f47-4bc9-9dcc-5af9b2a22774/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_9.45.04.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021346Z&X-Amz-Expires=86400&X-Amz-Signature=71ec8b9e3edadc84a4b2fab219f1ef3dea705e64c2182a23570982e95eda0bee&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%25209.45.04.png%22&x-id=GetObject)

```java
//ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœ(ë¹„ì˜ì†)
Member member = new Member();
member.setId("member1");
member.setUsername("íšŒì›1");

EntityManager em = emf.createEntityManager();
em.getTransaction().begin();

 //ê°ì²´ë¥¼ ì €ì¥í•œ ìƒíƒœ(ì˜ì†)
em.persist(member);
```

- EntityManager ì•ˆì—ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ë°,
- Memberê°ì²´ë¥¼ ìƒì„±í•œ ë‹¤ìŒ EntitiyManager ë¶ˆëŸ¬ì™€ì„œ persistí•´ì£¼ë©´ member ê°ì²´ê°€ EntityManagerì— ì˜ì† ì»¨í…ìŠ¤íŠ¸ì— ë“¤ì–´ê°€ì„œ ì˜ì† ìƒíƒœê°€ ë¨.
- í•˜ì§€ë§Œ ì´ ë•Œ ì§„ì§œ DBì— ì €ì¥ë˜ëŠ” ê±´ ì•„ë‹˜!!
- DBì—ëŠ” commitì„ í•´ì•¼ ì €ì¥ë¨.!!
    
    `em.commit()`
    

### ì¤€ì˜ì†, ì‚­ì œ

- `em.detach(member)` ë¥¼ í•˜ë©´ ë©¤ë²„ ì—”í‹°í‹°ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë¶„ë¦¬!! ì¤€ì˜ì† ìƒíƒœê°€ ë¨.
- `em.remove(member)` ë¥¼ í•˜ë©´ ë©¤ë²„ ê°ì²´ë¥¼ ì•„ì˜ˆ ì‚­ì œ! â†’ ì‹¤ì œ dbì—ì„œ ì‚­ì œ.

### ì¤€ì˜ì† ìƒíƒœë¡œ ë§Œë“œëŠ” ë°©ë²•

1. em.detach(entitiy)  â†’ íŠ¹ì • ì—”í‹°í‹°ë§Œ ì¤€ì˜ì† ìƒíƒœë¡œ ì „í™˜

```java
//ì˜ì† ìƒíƒœ
Member member = em.find(Member.class, 150L);
member.setName("AAAA");

//ì¤€ì˜ì†ìœ¼ë¡œ ë§Œë“¤ì—ˆìŒ.
em.detach(member);
```

- ì´ë ‡ê²Œ ë˜ë©´ ë°ì´í„°ë¥¼ ìˆ˜ì •í•´ë„ ìˆ˜ì • ì¿¼ë¦¬ê°€ ì•ˆë‚ ì•„ê°.

1. em.clear()  â†’  ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì™„ì „íˆ ì´ˆê¸°í™”. ì¦‰, 1ì°¨ ìºì‹œ ë‹¤ ì‚­ì œ!

```java
//ì˜ì† ìƒíƒœ
Member member = em.find(Member.class, 150L);
member.setName("AAAA");

//ì¤€ì˜ì†ìœ¼ë¡œ ë§Œë“¤ì—ˆìŒ.
em.clear();

Member member2 = em.find(Member.class,150L);
```

- em.clear()í•œ ë’¤ ë˜‘ê°™ì€ ê°’ì´ ë‹¤ì‹œ ì°¾ì„ ê²½ìš° ìºì‹œì— ìˆëŠ” ë°ì´í„° ê°’ì„ ë°˜í™˜í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼  dbì—ì„œ ìƒˆë¡œ ì¡°íšŒí•´ì„œ ê°’ì„ ë°˜í™˜í•´ì¤Œ.

1. em.close()  â†’  ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì¢…ë£Œ.

## ê·¸ë˜ì„œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ê°€ ì™œ ì¢‹ì•„?

- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ dbì‚¬ì´ì— ìˆëŠ” ì¤‘ê°„ê³„ì¸µ
1. 1ì°¨ ìºì‹œ
2. ë™ì¼ì„±(identity) ë³´ì¥
3. íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—° (transactional write-behind)
4. ë³€ê²½ ê°ì§€(Dirty Checking)
5. ì§€ì—° ë¡œë”©(Lazy Loading)

### 1ì°¨ ìºì‹œ

- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ëŠ” ë‚´ë¶€ì— 1ì°¨ ìºì‹œë¼ëŠ” ê²ƒì„ ë“¤ê³  ìˆìŒ.
- ë§Œì•½ em.find í•´ì„œ ê°’ì„ ì°¾ì„ ë•Œ DBë¥¼ í™•ì¸ ê²ƒì´ ì•„ë‹ˆê³  1ì°¨ë¡œ ì˜ì† ì»¨í…ìŠ¤íŠ¸ ì•ˆì— ìˆëŠ” ìºì‹œë¥¼ ë¨¼ì € í™•ì¸.

```java
Member member = new Member();
 member.setId("member1");
 member.setUsername("íšŒì›1");

 //1ì°¨ ìºì‹œì— ì €ì¥ë¨
 em.persist(member);

 //1ì°¨ ìºì‹œì—ì„œ ì¡°íšŒ
 Member findMember = em.find(Member.class, "member1");
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 10.17.58.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/16858577-5927-4bc1-b58f-32ced1b78c55/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.17.58.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021408Z&X-Amz-Expires=86400&X-Amz-Signature=fdf4f78dae3d71dcdbc19f7e0d8a62548cb465d55695dce04fbd83b61d048738&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252010.17.58.png%22&x-id=GetObject)

- ìºì‹œì—ëŠ” member2ê°€ ì—†ëŠ”ë° ì´ê±¸ ì°¾ëŠ”ë‹¤ê³  í•˜ë©´

```java
Member findMember2 = em.find(Membaer.class, "member2");
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 10.22.10.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/5d719d7e-882a-4a67-b36c-baed6c8c0b93/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.22.10.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021421Z&X-Amz-Expires=86400&X-Amz-Signature=8e74bf3033ac8bfc979e725b490a02d20970e89c21da0a89bde67f72641fd17f&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252010.22.10.png%22&x-id=GetObject)

- ìš°ì„  1ì°¨ ìºì‹œ í™•ì¸ í›„ member2ê°€ ì—†ìœ¼ë©´ dbë¥¼ ì¡°íšŒí•´ì„œ ì§ì ‘ êº¼ë‚´ì˜´.
- ê·¸ ë‹¤ìŒ 1ì°¨ ìºì‹œì— ì €ì¥í•´ë†“ê³  ê°’ì„ ë°˜í™˜í•´ì¤Œ.
- ë‚˜ì¤‘ì— ë˜‘ê°™ì€ ê°’ì„ ë‹¤ì‹œ ì°¾ì„ ë•ŒëŠ” dbë¥¼ ì¡°íšŒí•˜ì—¬ êº¼ë‚´ì˜¤ëŠ”ê²Œ ì•„ë‹ˆë¼ 1ì°¨ ìºì‹œë¡œ ê°’ì„ ë°˜í™˜í•´ì¤Œ.

### ì˜ì† ì—”í‹°í‹°ì˜ ë™ì¼ì„± ë³´ì¥

```java
Member a = em.find(Member.class, "member1");
Member b = em.find(Member.class, "member1");

System.out.println(a == b); //ë™ì¼ì„± ë¹„êµ true
```

- ìë°” Collectionì—ì„œ ë™ì¼í•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ìˆëŠ” ê°’ì„ êº¼ë‚´ì˜¤ë©´ ë˜‘ê°™ë“¯ì´ ì–˜ë„ ê·¸ëŸ¼.

### ì—”í‹°í‹°ë¥¼ ë“±ë¡í•  ë•Œ íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ì“°ê¸° ì§€ì—°

```java
EntityManager em = emf.createEntityManager();
EntityTransaction transaction = em.getTransaction();
//ì—”í‹°í‹° ë§¤ë‹ˆì €ëŠ” ë°ì´í„° ë³€ê²½ì‹œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•´ì•¼ í•œë‹¤.

transaction.begin(); // [íŠ¸ëœì­ì…˜] ì‹œì‘

Member memberA = new Member(150L, "A");
Member memberB = new Member(160L, "B");

em.persist(memberA);
em.persist(memberB);
//ì—¬ê¸°ê¹Œì§€ INSERT SQLì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤.

//ì»¤ë°‹í•˜ëŠ” ìˆœê°„ ë°ì´í„°ë² ì´ìŠ¤ì— INSERT SQLì„ ë³´ë‚¸ë‹¤.
transaction.commit(); // [íŠ¸ëœì­ì…˜] ì»¤ë°‹
```

- íŠ¸ëœì­ì…˜ commit í•˜ê¸° ì „ê¹Œì§€ëŠ” ì¿¼ë¦¬ë¥¼ JPAì— ê³„ì† ìŒ“ê³  ìˆë‹¤ê°€,
- commit í•˜ëŠ” ìˆœê°„ DBì— ì¿¼ë¦¬ë¥¼ ë‚ ë¦¼.

ex)

- memberAì™€ memberBë¥¼ persistí•˜ë©´ ì´ ë‘˜ì€ DBì— ë°”ë¡œ ì €ì¥ë˜ì§€ ì•Šê³  ì˜ì† ì»¨í…ìŠ¤íŠ¸ì— 1ì°¨ ìºì‹œë¡œ ì €ì¥ë¨.
- ê·¸ëŸ¬ë©´ì„œ ë™ì‹œì— JPAê°€ ì—”í‹°í‹°ë¥¼ ë¶„ì„í•´ì„œ insert ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ì—¬ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— ìŒ“ì•„ë†“ìŒ.
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 10.36.00.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/7c6b1804-5183-459d-93cb-a28feeb75d2e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.36.00.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021439Z&X-Amz-Expires=86400&X-Amz-Signature=455738df5fd367b9dd321bf33fc2e2fe6cc6628f4accac85e7aa775e727c62c6&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252010.36.00.png%22&x-id=GetObject)
    

> ê·¸ëŸ¼ ì¿¼ë¦¬ëŠ” ì–¸ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë‚ ì•„ê°€ëŠ”ë°??
> 
- `transction.commit()` í•˜ëŠ” ìˆœê°„!!

### ì—”í‹°í‹° ìˆ˜ì •í•  ë•Œ ë³€ê²½ ê°ì§€

```java
EntityManager em = emf.createEntityManager();
EntityTransaction transaction = em.getTransaction();

transaction.begin(); 
// [íŠ¸ëœì­ì…˜] ì‹œì‘

// ì˜ì† ì—”í‹°í‹° ì¡°íšŒ
Member memberA = em.find(Member.class, "memberA");

// ì˜ì† ì—”í‹°í‹° ë°ì´í„° ìˆ˜ì •
memberA.setUsername("hi");
memberA.setAge(10);

//em.update(member) ì´ëŸ° ì½”ë“œê°€ ìˆì–´ì•¼ í•˜ì§€ ì•Šì„ê¹Œ? ê·¼ë° ì—†ì–´ë„ ë¨~

transaction.commit(); // [íŠ¸ëœì­ì…˜] ì»¤ë°‹
```

- setUsername ê³¼ setAgeë¡œ ê°’ë§Œ ë°”ê¿¨ëŠ”ë° update ì¿¼ë¦¬ê°€ dbì— ìë™ìœ¼ë¡œ ë‚ ì•„ê°.

> ì´ê²Œ ì–´ë–»ê²Œ ê°€ëŠ¥í•˜ëƒê³ ??
> 

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 10.48.26.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/06d0699a-90fc-44c2-8192-7da4ca3f56d6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.48.26.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021454Z&X-Amz-Expires=86400&X-Amz-Signature=c1b5c65506223d48a5787809c90729e614ba236fb1f5d10a713fbf8bc2ecb42b&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252010.48.26.png%22&x-id=GetObject)

- ì˜ì† ì»¨í…ìŠ¤íŠ¸ëŠ” ìŠ¤ëƒ…ìƒ·ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆëŠ”ë°, ì´ê²Œ ë­ëƒë©´
- ë‚´ê°€ ë°©ê¸ˆê¹Œì§€ ì²˜ë¦¬í•œ entityì˜ ì •ë³´ë¥¼ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ê°€ì§€ê³  ìˆìŒ.
- ê·¸ë˜ì„œ ìƒˆë¡œìš´ ê°’ì´ ë“¤ì–´ì˜¤ë©´ ìŠ¤ëƒ…ìƒ·ì´ë‘ ë¹„êµí•˜ì—¬ ë‹¤ë¥¸ ë¶€ë¶„ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ë‹¤ë¥¸ ë¶€ë¶„ì´ ìˆìœ¼ë©´ ì´ ë¶€ë¶„ì— ëŒ€í•œ update ì¿¼ë¦¬ë¥¼ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— ëª¨ì•„ë†¨ë‹¤ê°€ ì»¤ë°‹í•˜ë©´ dbì— ë•Œë ¤ ë„£ìŒ.

## ì—”í‹°í‹° ì‚­ì œ

```java
//ì‚­ì œ ëŒ€ìƒ ì—”í‹°í‹° ì¡°íšŒ
Member memberA = em.find(Member.class, â€œmemberA");

em.remove(memberA); //ì—”í‹°í‹° ì‚­ì œ
```

- ì—”í‹°í‹°ë¥¼ ê·¸ëƒ¥ ì™„ì „ ì‚­ì œ.

## flush

- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ë‚´ìš©ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜í•˜ëŠ” ê²ƒ. ë°ì´í„°ë² ì´ìŠ¤ì— ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ê²ƒ .
- í”ŒëŸ¬ì‹œê°€ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¹„ìš°ê³  ë””ë¹„ì— ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ dbì™€ ë™ê¸°í™” í•˜ëŠ” ê²ƒ!

## í”ŒëŸ¬ì‹œê°€ ë°œìƒí•˜ë©´ ë¬´ìŠ¨ ì¼ì´ ìƒê¸°ëƒ?

- ë³€ê²½ ê°ì§€ê°€ ì¼ì–´ë‚¨
- ìˆ˜ì •ëœ ì—”í‹°í‹°ë¥¼ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— ë“±ë¡
- ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì˜ ì¿¼ë¦¬ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ì†¡ (ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ì¿¼ë¦¬)

## ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ í”ŒëŸ¬ì‹œ í•˜ëŠ” ë°©ë²•

1. `transaction.commit()` í•˜ë©´ ìë™ í˜¸ì¶œ.
2. transaction.commit()í•˜ê¸° ì „ì— dbì— ë¨¼ì € ë°˜ì˜í•˜ê³  ì‹¶ìœ¼ë©´ commit ëŒ€ì‹  `em.flush()`ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ë¨. 
3. JPQL ì¿¼ë¦¬ ì‹¤í–‰
    
    ```java
    em.persist(memberA);
    em.persist(memberB);
    em.persist(memberC);
    
    //ì¤‘ê°„ì— JPQL ì‹¤í–‰
    query = em.createQuery("select m from Member m", Member.class);
    List<Member> members= query.getResultList();
    ```
    

---

# Entity Mapping

> ê°ì²´ì™€ ê´€ê³„dbì˜ í…Œì´ë¸”ì„ ì–´ë–»ê²Œ ë§¤í•‘í•´ì„œ ì“¸ê¹Œ?
> 
1. **ê°ì²´ì™€ í…Œì´ë¸”ì„ ë§¤í•‘**: @Entity,@Table
2. **í•„ë“œì™€ ì»¬ëŸ¼ì„ ë§¤í•‘**: @Column
3. **ê¸°ë³¸í‚¤ ë§¤í•‘**: @Id
4. **ì—°ê´€ê´€ê³„ ë§¤í•‘**: @ManyToOne,@JoinColumn

### ê°ì²´ì™€ í…Œì´ë¸” ë§¤í•‘

@Entity

- @Entityê°€ ë¶™ì€ í´ë˜ìŠ¤ëŠ” JPAê°€ ê´€ë¦¬í•˜ë©°, ì—”í‹°í‹°ë¼ê³  í•œë‹¤.
- JPAë¥¼ ì‚¬ìš©í•´ì„œ í…Œì´ë¸”ê³¼ ë§¤í•‘í•  í´ë˜ìŠ¤ëŠ” @Entity í•„ìˆ˜!!
- **ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜ (íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” public ë˜ëŠ” protected)**
- final í´ë˜ìŠ¤ , enum, interface, inner í´ë˜ìŠ¤ ì‚¬ìš© ëª»í•¨!
- ë‚´ê°€ dbì— ì €ì¥í•˜ê³  ì‹¶ì€ í•„ë“œì—ëŠ” final ì‚¬ìš© ëª»í•¨!

@Entity ì†ì„± ì •ë¦¬

```java
@Entity (name = "Member")
@Table(name="MBR")
public class Members {

    @Id
    private Long id;
    private String name;
    
    public Members() {
        
    }
    
    public Members(Long id, String name) {
        this.id = id;
        this.name = name;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

- **name**ì€ JPAì—ì„œ ì‚¬ìš©í•  ì—”í‹°í‹° ì´ë¦„ì„ ì •í•œë‹¤.
- ê¸°ë³¸ê°’ìœ¼ë¡œëŠ” í´ë˜ìŠ¤ ì´ë¦„ ê·¸ëŒ€ë¡œ ì‚¬ìš©! ì—¬ê¸°ëŠ” í´ë˜ìŠ¤ ì´ë¦„ì´ Membersë‹ˆê¹Œ Membersê°€ ê¸°ë³¸ê°’.
- ê°™ì€ í´ë˜ìŠ¤ ì´ë¦„ì´ ì—†ìœ¼ë©´ ê°€ê¸‰ì  ê¸°ë³¸ê°’ ì‚¬ìš©.
- **@Table**ì€ dbì—ì„œ ë§¤í•‘í•  í…Œì´ë¸”ì˜ ì´ë¦„ì„ ì§€ì •.

## í•„ë“œì™€ ì»¬ëŸ¼ ë§¤í•‘

### ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜ ì •ë¦¬

```java
@Entity
 public class Member {

 @Id
 private Long id;

 @Column(name = "name")
 private String username;private Integer age;

 @Enumerated(EnumType.STRING)
 private RoleType roleType;

 @Temporal(TemporalType.TIMESTAMP)
 private Date createdDate;

 @Temporal(TemporalType.TIMESTAMP)
 private Date lastModifiedDate;

 @Lob
 private String description;

 @Transient
 private int temp;
}
```

- **@Column** = ì»¬ëŸ¼ ë§¤í•‘
- **@Temporal** = ë‚ ì§œ íƒ€ì… ë§¤í•‘
- **@Enumerated** = enum íƒ€ì… ë§¤í•‘
- **@Lob** = BOLB,CLOB ë§¤í•‘
- **@Transient** = íŠ¹ì • í•„ë“œë¥¼ ì»¬ëŸ¼ì— ë§¤í•‘í•˜ì§€ ì•ŠìŒ (ë§¤í•‘ ë¬´ì‹œ)

### @Column

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 11.56.04.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/26e35281-666f-46f4-8e02-2cdc8fd6d9ee/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.56.04.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021514Z&X-Amz-Expires=86400&X-Amz-Signature=6be30ec52b702a37d7a77fb6722ad3dbed16d41464e2dd95825f37ff90ad2145&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252011.56.04.png%22&x-id=GetObject)

### @Enumrated

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 11.56.33.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/efb821f4-e547-476d-8334-aabb24e4ad41/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.56.33.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021526Z&X-Amz-Expires=86400&X-Amz-Signature=81efea33b706c1f2349bd5e934bab26883c6efb827cd5e261473ba0eca1a1be2&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252011.56.33.png%22&x-id=GetObject)

### @Temporal

- ë‚ ì§œ íƒ€ì…(java.util.Date, java.util.Calendar)ì„ ë§¤í•‘í•  ë•Œ ì‚¬ìš©
- ****ì°¸ê³ : LocalDate, LocalDateTimeì„ ì‚¬ìš©í•  ë•ŒëŠ” ìƒëµ ê°€ëŠ¥(ìµœì‹  í•˜ì´ë²„ë„¤ì´íŠ¸ ì§€ì›)****

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„Œá…¥á†« 11.57.23.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/0c08def2-edd8-450f-85fa-89d74bd139de/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.57.23.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021540Z&X-Amz-Expires=86400&X-Amz-Signature=185305098fe60f61e3a7f2b8e3ab374b429d12c8fabde3387cc840c70c1a1a78&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB%252011.57.23.png%22&x-id=GetObject)

### @Lob

- ë§¤í•‘í•˜ëŠ” í•„ë“œ íƒ€ì…ì´ ë¬¸ìë©´ CLOBë§¤í•‘,
- ë‚˜ë¨¸ì§€ëŠ” BLOB ë§¤í•‘
- ****CLOB: String, char[], java.sql.CLOB****
- ****BLOB: byte[], java.sql. BLOB****

### @Transient

- í•„ë“œ ë§¤í•‘ X
- ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥, ì¡°íšŒ X
- ì£¼ë¡œ ë©”ëª¨ë¦¬ìƒì—ì„œë§Œ ì„ì‹œë¡œ ì–´ë–¤ ê°’ì„ ë³´ê´€í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©.

## ê¸°ë³¸í‚¤ ë§¤í•‘ ë°©ë²•

1. ì§ì ‘ id ê°’ì„ í• ë‹¹í•˜ê³  ì‹¶ìœ¼ë©´ **@Id**ë§Œ ì‚¬ìš©.
    
    ```java
    @Id
    private string id;
    ```
    
2. ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ê³  ì‹¶ìœ¼ë©´ **@GeneratedValue** ì™€ ê°™ì´ ì‚¬ìš©.
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 12.12.08.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/562890d9-21a0-48a6-b42d-e9ad5858a162/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.12.08.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021556Z&X-Amz-Expires=86400&X-Amz-Signature=e7e30b0ee35ed9d144206a877ab0ad50acf5ca977653ad69237cb5e2eeea21c7&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%252012.12.08.png%22&x-id=GetObject)
    
    - **`IDENTITY`** : ê¸°ë³¸í‚¤ ìƒì„±ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ****ìœ„ì„
        - ì£¼ë¡œ MySQL, PostgreSQL, SQL Server, DB2ì—ì„œ ì‚¬ìš©
        (ì˜ˆ: MySQLì˜ AUTO_ INCREMENT)
        
        ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 12.15.03.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/d26b53da-ce3f-4eac-8593-eee2d534d161/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.15.03.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021611Z&X-Amz-Expires=86400&X-Amz-Signature=a1069a5c1d10f6d5bb87ca235d3c355a5b860a4dad6ef2f0b19ae6598f0fafed&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%252012.15.03.png%22&x-id=GetObject)
        
    - `**SEQUENCE**` : ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ ì˜¤ë¸Œì íŠ¸ ì‚¬ìš©, ORACLE â†’ @SequenceGenerator í•„ìš”
        - ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ëŠ” ìœ ì¼í•œ ê°’ì„ ìˆœì„œëŒ€ë¡œ ìƒì„±í•˜ëŠ” íŠ¹ë³„í•œ
        ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¸Œì íŠ¸(ì˜ˆ: ì˜¤ë¼í´ ì‹œí€€ìŠ¤)
        - ì˜¤ë¼í´, PostgreSQL, DB2, H2 ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©
            
            ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 12.16.53.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/9c015e20-8208-403d-9e15-a9e0ca84e279/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.16.53.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021623Z&X-Amz-Expires=86400&X-Amz-Signature=ca6148cd280037f8bafab303752915c3ed53c612328863dcda31080fd507130c&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%252012.16.53.png%22&x-id=GetObject)
            
    - **`TABLE`** : í‚¤ ìƒì„±ìš© í…Œì´ë¸” ì‚¬ìš©, ëª¨ë“  DBì—ì„œ ì‚¬ìš© â†’ @TableGenerator í•„ìš”
        - í‚¤ ìƒì„± ì „ìš© í…Œì´ë¸”ì„ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì‹œí€€ìŠ¤ë¥¼ í‰ë‚´ ë‚´ëŠ” ì „ëµ.
        - ì¥ì : ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš© ê°€ëŠ¥
        - ë‹¨ì : ì„±ëŠ¥
    - ì´ê±´ ì˜ ì•ˆì”€.
        
        ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 12.21.07.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/983340d8-640d-463c-8052-8b5af326eae7/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.21.07.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021638Z&X-Amz-Expires=86400&X-Amz-Signature=9c9d88cbbaaf7d3b088a7a81b37efcc6b756937459e64952a9412f9aaa030b3a&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%252012.21.07.png%22&x-id=GetObject)
        
    - **`AUTO`** : ë°©ì–¸ì— ë”°ë¼ ìë™ ì§€ì •, ê¸°ë³¸ê°’
    
    ## **ì´ê±° ë³´ê³  í…Œì´ë¸” ì§ì ‘ ë§Œë“¤ì–´ë³´ê¸°!!!!**
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 12.45.40.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/cf3b7106-c96e-43f9-a5dd-3692d9e04787/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.45.40.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021655Z&X-Amz-Expires=86400&X-Amz-Signature=eb39b5ef04f8d583acf95a6b8f56feaba0cf1504d97dde6e9ed274e5df7f5b50&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%252012.45.40.png%22&x-id=GetObject)
    

# ìë£Œêµ¬ì¡°_Stack/Queue

## ì–´ë””ì„œ ë¶€í„° ê°’ì„ êº¼ë‚¼ê¹Œ??

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 3.04.14.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/48ee0bd1-9f9c-4ca3-a389-ac11ecdf0a65/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.04.14.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021712Z&X-Amz-Expires=86400&X-Amz-Signature=410e4d54d8ae3db0da01793168c38b40edd191605a60d3bccf46c6aa9298a300&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25203.04.14.png%22&x-id=GetObject)

# Stack

- ë’¤ì—ì„œ ë¶€í„° êº¼ë‚´ê¸°
- **LIFO = Last In First Out**
- â€œê°€ì¥ ë‚˜ì¤‘ì— ë“¤ì–´ê°„ ê°’ì´ ê°€ì¥ ë¨¼ì € ë‚˜ì˜¨ë‹¤â€

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 4.52.57.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/f81ddcc1-c6c4-414f-aff9-ae919615c79f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.52.57.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021727Z&X-Amz-Expires=86400&X-Amz-Signature=6e351dfdad649c7c52b4575e251c9a881a3e8758434916fe6871f3d05a90d0c4&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25204.52.57.png%22&x-id=GetObject)

- Stackì— ê°’ì„ ì§‘ì–´ ë„£ëŠ” ê²ƒ `push()`
- Stackì—ì„œ ê°’ì„ êº¼ë‚¼ ë–„ëŠ” `pop()`
- êº¼ë‚¼ ì°¨ë¡€ì— ìˆëŠ” ê°’ì„ í™•ì¸ í•  ë•ŒëŠ” `peek()`

**Listë¡œ ìŠ¤íƒ êµ¬í˜„í•˜ê¸°**

```java
public class Solution {
    public static void main(String[] args) {
        List<Integer> list = new LinkedList<>();

        list.add(1); // ì œì¼ ë¨¼ì € ë„£ì€ ê°’ì„.
        list.add(2);
        list.add(3);
        list.add(4);
        list.add(5);

        System.out.println(list);

        System.out.println(list.remove(list.size()-1));
        System.out.println(list);

        System.out.println(list.remove(list.size()-1));
        System.out.println(list);

    }
}
				//ì¶œë ¥ ê°’
				[1, 2, 3, 4, 5]
				 5                 //ì œì¼ ë§ˆì§€ë§‰ì— ë„£ì€ ê°’ì´ ì œì¼ ì²˜ìŒìœ¼ë¡œ ë‚˜ì˜´.
				[1, 2, 3, 4]
				 4
				[1, 2, 3]
```

**ìë°”ê°€ ì œê³µí•´ì£¼ëŠ” Stack ì‚¬ìš©**

```java
public class Solution {
    public static void main(String[] args) {
        Stack<Integer> stack = new Stack<>();

        stack.push(1);
        stack.push(2);
        stack.push(3);
        stack.push(4);
        stack.push(5);  // ê°€ì¥ ë‚˜ì¤‘ì— ë„£ì€ ê°’

        System.out.println(stack);

        stack.pop();
        System.out.println(stack);
        stack.pop();
        System.out.println(stack);
        stack.pop();
        System.out.println(stack);

    }
}
				// ì¶œë ¥ ê°’
				[1, 2, 3, 4, 5]
				[1, 2, 3, 4]
				[1, 2, 3]
				[1, 2]
```

# Queue

- ì•ì—ì„œ ë¶€í„° êº¼ë‚´ê¸°
- **FIFO = First In First Out**
- â€œì œì¼ ë¨¼ì € ë“¤ì–´ê°„ ë°ì´í„°ê°€ ì œì¼ ë¨¼ì € ë‚˜ì˜¨ë‹¤â€

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 3.22.17.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4dbb90b2-964f-4705-a9a1-8c82d289c7e6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.22.17.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021744Z&X-Amz-Expires=86400&X-Amz-Signature=0223ea8ec38b6a1cf25be7650c0a99121c46f34c337323979041b830dc4b89cf&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25203.22.17.png%22&x-id=GetObject)

- Queueì— ê°’ì„ ë„£ì„ ë•ŒëŠ” `offer()`
- Queueì—ì„œ ê°’ì„ ëº„ ë•ŒëŠ” `poll()`
- êº¼ë‚¼ ì°¨ë¡€ì— ìˆëŠ” ê°’ì„ í™•ì¸ í•  ë•ŒëŠ” `peek()`

**Listë¡œ í êµ¬í˜„í•˜ê¸°**

```java
public class Solution {
    public static void main(String[] args) {
        List<Integer> list = new LinkedList<>();

        list.add(1); // ì œì¼ ë¨¼ì € ë„£ì€ ê°’ì„.
        list.add(2);
        list.add(3);
        list.add(4);
        list.add(5);

        System.out.println(list);

        System.out.println(list.remove(0));
        System.out.println(list);

        System.out.println(list.remove(0));
        System.out.println(list);

    }
}
				//ì¶œë ¥ ê°’
				[1, 2, 3, 4, 5]
				 1                  //ì œì¼ ë¨¼ì € ë„£ì€ 1ì´ ì œì¼ ë¨¼ì € ë‚˜ì™”ìŒ.
				[2, 3, 4, 5]
				 2
				[3, 4, 5]
```

**ìë°”ê°€ ì œê³µí•´ì£¼ëŠ” Queue ì‚¬ìš©.**

```java
public class Solution {
    public static void main(String[] args) {
        Queue<Integer> queue = new LinkedList<>();

        queue.offer(1); // ì œì¼ ë¨¼ì € ë„£ì€ ê°’.
        queue.offer(2);
        queue.offer(3);
        queue.offer(4);
        queue.offer(5);

        System.out.println(queue);
        queue.poll();
        System.out.println(queue);
        queue.poll();
        System.out.println(queue);
        queue.poll();
        System.out.println(queue);

    }
}
				//ì¶œë ¥ ê°’
				[1, 2, 3, 4, 5]
				[2, 3, 4, 5]
				[3, 4, 5]
				[4,5]
```

# ì–‘ìª½ìœ¼ë¡œ êº¼ë‚´ê³  ëº„ ìˆ˜ ìˆëŠ” ê±´ ì—†ì–´? ìˆì§€!! Deque!!

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-14 á„‹á…©á„’á…® 5.02.39.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/d8de7657-2cc3-474e-9230-92c7b4a988d2/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2022-06-14_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.02.39.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220630%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220630T021757Z&X-Amz-Expires=86400&X-Amz-Signature=f3e6b556ed8585b159ee1516c5e34ecec3f5f94a80b83330bb5e9b4983f76517&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA%25202022-06-14%2520%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE%25205.02.39.png%22&x-id=GetObject)

- ì•ì— ë°ì´í„°ë¥¼ ë„£ê³  ì‹¶ìœ¼ë©´ `offerFirst()`.
- ë’¤ì— ë°ì´í„°ë¥¼ ë„£ê³  ì‹¶ìœ¼ë©´ `offerLast()`.
- ì•ì— ê°’ì„ êº¼ë‚´ê³  ì‹¶ìœ¼ë©´ `pollFirst()`.
- ë’¤ì— ê°’ì„ êº¼ë‚´ê³  ì‹¶ìœ¼ë©´ `pollLast()`.
- ì•ì—ì„œ êº¼ë‚¼ ì°¨ë¡€ì˜ ê°’ì„ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´ `peekFirst()`.
- ë’¤ì—ì„œ êº¼ë‚¼ ì°¨ë¡€ì˜ ê°’ì„ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´ `peekLast()`.

```java
public class Solution {
    public static void main(String[] args) {
        Deque<Integer> deque = new LinkedList<>();

        deque.offerFirst(1);
        System.out.println(deque);

        deque.offerLast(2);
        System.out.println(deque);

        deque.offerFirst(3);
        System.out.println(deque);

        deque.offerLast(4);
        System.out.println(deque);

				deque.peekFirst();
        System.out.println(deque);
        deque.peekFirst();
        System.out.println(deque);

    }
}
				// ì¶œë ¥ ê°’
				[1]
				[1, 2]
				[3, 1, 2]
				[3, 1, 2, 4]
				[1,2,4]
				[2,4]
```

### ì¤‘ê°„ì— ìˆëŠ” ê°’ì„ êº¼ë‚´ê³  í™•ì¸í•˜ê³  ì‹¶ì„ ë•ŒëŠ” Stack, Queue, Deque ëŠ” ì–´ìš¸ë¦¬ì§€ ì•ŠìŒ!!! âŒâŒ

# ì•Œê³ ë¦¬ì¦˜

### ì˜¬ë°”ë¥¸ ê´„í˜¸

```java
class Solution {
    boolean solution(String s) {

        int stack = 0;
        for(char c : s.toCharArray()) {
            if (c == '(') {
                stack++;
            } else {
                if (stack == 0) {
                    return false;
                }
                stack--;
            }
        }
        return stack == 0;
    }

    public static void main(String[] args) {
        Solution s = new Solution();
        System.out.println(s.solution(")(()("));
    }
}
```

### ê¸°ëŠ¥ ê°œë°œ

```java
import java.util.Arrays;

class Solution {
    public int[] solution(int[] progresses, int[] speeds) {
       int[] work = new int[100]; // ìµœëŒ€ ì‘ì—…ëŸ‰
       int day = 1;
       for(int i = 0; i < progresses.length; i++) {
           while (progresses[i] + (day*speeds[i]) < 100) {
               day++;
           }
           work[day]++;
       }
       return Arrays.stream(work).filter(i -> i !=0).toArray();
    }

    public static void main(String[] args) {
        Solution s = new Solution();
        int[] progresses = {93,30,55};
        int[] speed = {1,30,5};
        System.out.println(Arrays.toString(s.solution(progresses,speed)));
    }
}
```
