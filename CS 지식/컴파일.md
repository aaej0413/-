# 컴파일

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4d01b1ee-a69a-400c-8e04-7463e6903ba1/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220702%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20220702T064526Z&X-Amz-Expires=86400&X-Amz-Signature=567fb80c10db4a9f5f0071bc8d749fe3ce2769de410d6cbedd426da7dbbbe203&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22Untitled.png%22&x-id=GetObject)

## 우리가 명령어를 실행할 때 일어나는 일 !

### **전처리(Precompile)**

- **컴파일의 전체 과정은 네 단계**
- 그 중 첫 번째 단계는 **전처리**인데, 전처리기에 의해 수행. # 으로 시작되는 C 소스 코드는 전처리기에게 **실질적인 컴파일이 이루어지기 전에 무언가를 실행**하라고 알려준다..
- 예를 들어, #include는 전처리기에게 다른 파일의 내용을 포함시켜~ 라고 알려준다.
- 프로그램의 소스 코드에 #include 와 같은 줄을 포함하면, 전처리기는 새로운 파일을 생성하는데
- 이 파일은 여전히 C 소스 코드 형태이며 stdio.h 파일의 내용이 #include 부분에 포함!

### **컴파일(Compile)**

- 전처리기가 전처리한 소스 코드를 생성하고 나면 그 다음 단계는 **컴파일이다**.
- **컴파일러**라고 불리는 프로그램은 **C 코드를 어셈블리어라는 저수준 프로그래밍 언어로 컴파일한다**.
- **어셈블리**는 C보다 연산의 종류가 훨씬 적지만, 여러 연산들이 함께 사용되면 C에서 할 수 있는 모든 것들을 수행.
- C 코드를 어셈블리 코드로 변환시켜줌으로써 컴파일러는 컴퓨터가 이해할 수 있는 언어와 최대한 가까운 프로그램으로 만들어 준다.
- 컴파일이라는 용어는 소스 코드에서 오브젝트 코드로 변환하는 전체 과정을 통틀어 일컫기도 하지만, 구체적으로 **전처리한 소스 코드를 어셈블리 코드로 변환시키는 단계**를 말하기도 한다.

### **어셈블(Assemble)**

- 소스 코드가 어셈블리 코드로 변환되면, 다음 단계인 **어셈블** 단계로 **어셈블리 코드를 오브젝트 코드로 변환**.
- 컴퓨터의 중앙처리장치가 프로그램을 어떻게 수행해야 하는지 알 수 있는 명령어 형태인 **연속된 0과 1들로 바꿔주는 작업이다**.
- 이 변환작업은 **어셈블러**라는 프로그램이 수행한다.
- 소스 코드에서 오브젝트 코드로 컴파일 되어야 할 파일이 딱 한 개라면, 컴파일 작업은 여기서 끝.
- 그러나 그렇지 않은 경우에는 링크라 불리는 단계가 추가된다.

### **링크(Link)**

- 만약 프로그램이 (math.h나 cs50.h와 같은 라이브러리를 포함해) **여러 개의 파일로 이루어져 있어 하나의 오브젝트 파일로 합쳐져야 한다면** **링크**라는 컴파일의 마지막 단계가 필요!
- 링커는 여러 개의 다른 오브젝트 코드 파일을 실행 가능한 하나의 오브젝트 코드 파일로 합친다.
- 예를 들어, 컴파일을 하는 동안에 CS50 라이브러리를 링크하면 오브젝트 코드는 GetInt()나 GetString() 같은 함수를 어떻게 실행할 지 알 수 있게 된다.
- 이 네 단계를 거치면 최종적으로 실행 가능한 파일이 완성.
